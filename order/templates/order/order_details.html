{% extends 'order_base.html' %}

{% block content %}
    <style>

        .product-image{

            width: 100px;
            height: 100px;
        }
        .product-image img{
            width: 100%;
            height: auto;
        }
    </style>

          <div class="box box-info">
            <div class="box-header with-border">
              <h3 class="box-title">Детали заказа</h3>
                <br>
              <a href="/order/list">К списку заказов</a>
            </div>
            <!-- /.box-header -->
            <!-- form start -->
            <form class="form-horizontal" action="/order/update/{{ order.id }}/" method="post">
              <div class="box-body">

                <div class="form-group">
                      <label class="col-sm-2 control-label">Название заказа:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order }}</p>
                      </div>
                </div>

                <div class="form-group">
                      <label class="col-sm-2 control-label">Время добавления заказа:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.created_date }}</p>
                      </div>
                </div>

                <div class="form-group">
                      <label class="col-sm-2 control-label">Общая сумма заказа:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.total_price|floatformat:2 }} руб</p>
                      </div>
                </div>

                <div class="form-group">
                      <label class="col-sm-2 control-label">ФИО клиента:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.name }}</p>
                      </div>
                </div>

                 <div class="form-group">
                      <label class="col-sm-2 control-label">Email клиента:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.email }}</p>
                      </div>
                </div>

                <div class="form-group">
                      <label class="col-sm-2 control-label">Телефон клиента:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.phone }}</p>
                      </div>
                </div>

                  <div class="form-group">
                      <label class="col-sm-2 control-label">Город:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.city }}</p>
                      </div>
                  </div>

                  <div class="form-group">
                      <label class="col-sm-2 control-label">Адрес:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.address }}</p>
                      </div>
                  </div>

                  <div class="form-group">
                      <label  class="col-sm-2 control-label">Почтовый индекс:</label>
                      <div class="col-sm-10">
                        <p style="margin-top: 7px">{{ order.zip_code }}</p>
                      </div>
                  </div>

                  {% if order.note %}
                      <div class="form-group">
                          <label class="col-sm-2 control-label">Заметки к заказу:</label>
                          <div class="col-sm-10">
                            <p style="margin-top: 7px">{{ order.note }}</p>
                          </div>
                      </div>
                  {% endif %}

                    <div class="form-group">
                          <label class="col-sm-2 control-label">Изменить статус</label>
                          <div class="col-sm-4">

                              <div class="input-group">


                                  {% csrf_token %}

                                      {% for field in order_form %}
                                          {{ field }}
                                      {% endfor %}

                                      <span class="input-group-btn">
                                        <button type="submit" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-arrow-right"></i>
                                        </button>
                                      </span>

                              </div>

                          </div>
                      </div>


              </div>
            </form>
              <!-- /.box-body -->
              <div class="box-footer">
                    <h3 class="box-title">Продукты</h3>

                   {% if products %}
                       <table class="table table-striped">
                            <tr>
                                <th>#</th>
                                <th>Картинка товара</th>
                                <th>Название товара</th>
                                <th>Артикул</th>
                                <th>Цена за единицу</th>
                                <th>Количество</th>
                                <th>Общая сумма</th>
                            </tr>
                           {% for product in products %}
                               <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td><div class="product-image"><img src="{{ product.product.thumbnail.url }}"></div></td>
                                    <td>{{ product.product.title }}</td>
                                    <td>{% if product.product.articul %}{{ product.product.articul }}{% endif %}</td>
                                    <td>{{ product.product_price|floatformat:2 }}</td>
                                    <td>{{ product.quantity }}</td>
                                    <td>{{ product.get_total_price|floatformat:2 }}</td>
                               </tr>
                           {% endfor %}
                        </table>
                  {% endif %}
              </div>
              <!-- /.box-footer -->
            </form>
          </div>
          <!-- /.box -->
{% endblock %}